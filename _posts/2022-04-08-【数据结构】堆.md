---
title: "【数据结构】堆"
image: algo.jpg
show_image: false
tags: [算法，数据结构]
categories: 算法
---

## 概要
堆（heap）是一种特殊类型的二叉树，具有以下两个性质。
1. 每个节点的值大于（or小于）等于其每个字节点的值。
2. 该树完全平衡，最后一层的叶子都处于最左侧的位置。树中层次的树木是$O(logn)$

## 应用
### 优先队列
使用堆实现优先队列需要实现两个过程：添加元素和删除元素
#### 添加元素
可以将元素作为最后一个叶节点添加到堆的末尾。为了保持堆的性质，在添加元素时将最后一个叶节点向根部移动。
#### 删除元素
从堆中删除最大or最小的元素，需要从堆中删除根元素。  
然后将最后一个叶节点放到根节点上，将根节点沿着树向下移动恢复堆的性质。

### 用数组实现堆
每个堆都是一个数组，但数组并不是堆。
左边的子节点为2n+1, 右边的子节点为2n+2
以下介绍两种将数组转化为堆的方法。
#### 自顶向下的方法
从一个空对开始，按顺序向逐渐增长的堆中添加元素。
该算法的复杂度：观察最坏情况。当新添加的元素必须移动到树的根时，对于有k节点的堆，需要进行$logk$次交换。
因此，如果加入n个元素，在最坏情况下执行算法进行的交换次数为：
$$ \sum^{n}_{k=1}logk = log1 + log2 + ... + logn = log(n!) = O(nlogn) $$

#### 自底向下的方法
在这种方法中，首先构造较小的堆，再以下面的方法将它们重复合并成很大的堆。
从最后一个非叶节点n/2-1开始，如果小于它的子节点，就与较大的子节点交换。
